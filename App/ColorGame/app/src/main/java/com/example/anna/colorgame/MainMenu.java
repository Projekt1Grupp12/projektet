package com.example.anna.colorgame;import android.app.Activity;import android.app.ProgressDialog;import android.content.Intent;import android.support.v7.app.AppCompatActivity;import android.os.Bundle;import android.util.Log;import android.view.View;import android.widget.Button;/*Class is an activity that shows main menu of the application.It has three TextView to show data. */public class MainMenu extends SuperActivity {    private static final String TAG = "debugMenu";    private Button chooseGameBtn;    private Class startNextActivityClass = null;    private AsyncResponse delegate = new AsyncResponse() {        @Override        public void postResult(String result) {            Log.d(TAG, "RESULTAT FRÃ…N SERVER " + result);        }};    @Override    protected void onCreate(Bundle savedInstanceState) {        Log.i(TAG, "onCreate(). MainMenu");        super.onCreate(savedInstanceState);        setContentView(R.layout.main_menu);        Intent intent = getIntent();        setPlayer((Player)intent.getSerializableExtra("player"));        startThreadMainMenu(this, getPlayer(), MainMenu.this);        chooseGameBtn = (Button) findViewById(R.id.choose_game_button);        if(getPlayer().getUserID().equals("0")){            chooseGameBtn.setText("Choose Game");        }else if(getPlayer().getUserID().equals("1")){            chooseGameBtn.setText("Join Game");            chooseGameBtn.setEnabled(false);        }    }    @Override    protected void onStop(){        Log.d(TAG, "onStop() ");        closeReceiveThread();        super.onStop();    }    /**     * This method is called when button "Choose Game" is clicked.     * It starts next activity and sends data to it using Intent class.     * @param view     */    public void chooseGame(View view){        Log.d(TAG, "Button Choose Game or Join Game is clicked");        if (getPlayer().getUserID().equals("0")) {            startNextActivity(getPlayer(), this, ChooseGame.class);        }        if (getPlayer().getUserID().equals("1")) {            startAsyncTask("ready;1", this.getPlayer(), delegate);//using new class            startProgressDialog("Starting...", this);        }        if (getPlayer() == null) {            Log.d(TAG, "Player null");        }    }    /**     * This method dismiss active progressbar and starts next activity.     */    public void startGame() {        closeProgressDialog();//when start=true, start next activity        startNextActivity(getPlayer(), this, startNextActivityClass);    }    public void setButtonActive(){ this.chooseGameBtn.setEnabled(true);}//is used in a while loop    public void setNextActivityGame(String str) {        if (str.contains(("PuzzleGame"))) {//if server sends PuzzleGame start PuzzleGame            startNextActivityClass = PuzzleGame.class;        } else if (str.contains(("TrafficGame"))) {            startNextActivityClass = TrafficGame.class;        } else if (str.contains(("DuelGame"))) {            startNextActivityClass = DuelGame.class;        }    }    public void showHighScore(View view) {        startNextActivity(getPlayer(), this, HighScore.class);    }    @Override    public boolean onNavigateUpFromChild(Activity child) {        Log.d(TAG, "onNavigationUpFromChild");        onBackPressed();        return true;    }    @Override    public void onBackPressed() {        startAsyncTask("logout" + ";" + getPlayer().getUserID(), this.getPlayer(), delegate);//using new class        startNextActivity(getPlayer(), this, MainFrame.class);    }}